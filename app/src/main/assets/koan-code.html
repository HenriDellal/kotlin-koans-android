<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="file:///android_asset/css/prism.css" />
    <link rel="stylesheet" href="file:///android_asset/css/codeflask.css" />
    <style type="text/css">
        body {
            font-size: 14px;
            margin: 0;
        }

        .koan .CodeFlask {
            /* Position must be: relative, absolute or fixed */
            /* https://github.com/kazzkiq/CodeFlask.js#how-do-i-define-the-size-of-my-editor */
            position: relative;
            min-width: 400px;
            min-height: 200px;
        }

        .koan .CodeFlask__pre {
            font-family: monospace;
            font-size: 13px;
        }
    </style>

    <script type="text/javascript" src="file:///android_asset/js/prism.js"></script>
    <script type="text/javascript" src="file:///android_asset/js/codeflask.js"></script>
    <script type="text/javascript">
        var $code = undefined;
        var codeflask = new CodeFlask();

        window.addEventListener('load', function () {
            $code = document.getElementById('koan-file-code');
            codeflask.run($code, { language: 'kotlin' });
        });

        function update() {
            if (! $code) {
                return;         // DOM not ready yet
            }
            codeflask.update(KOAN.getCode().trim());
            if (! KOAN.isModifiable()) {
                $code.querySelector('.CodeFlask__textarea').style.display = 'none';
            }
        }

        function getUserCode() {
            if (! $code) {
                return;         // DOM not ready yet
            }
            if (KOAN.isModifiable()) {
                KOAN.setUserCode($code.querySelector('.CodeFlask__textarea').value.trim());
            } else {
                KOAN.setUserCode(null);
            }
        }
    </script>
</head>

<body>
<main class="content">
    <article class="koan">

        <div id="koan-file-code" data-language="kotlin">
            <!-- koan code -->
        </div>

    </article>
</main>
</body>
</html>
